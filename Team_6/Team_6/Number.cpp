//=============================================================================
//
// 数字の表示処理 [number.cpp]
// Author : 樋宮 匠
//
//=============================================================================

//*****************************************************************************
// インクルードファイル
//*****************************************************************************
#include "number.h"
#include "renderer.h"
#include "manager.h"
#include "texture.h"
#include "resource_manager.h"

//*****************************************************************************
// 静的メンバ変数宣言
//*****************************************************************************
LPDIRECT3DTEXTURE9 CNumber::m_pTexture = NULL;

//=============================================================================
// コンストラクタ
//=============================================================================
CNumber::CNumber(PRIORITY Priority) : CScene2D(Priority)
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CNumber::~CNumber()
{
}

//=============================================================================
// 初期化処理
//=============================================================================
HRESULT CNumber::Init(D3DXVECTOR3 pos)
{
	CScene2D::Init(pos, NUM_SIZE);
	// テクスチャの設定
	CTexture *pTexture = CManager::GetResourceManager()->GetTextureClass();
	BindTexture(pTexture->GetTexture(CTexture::TEXTURE_NUM_TIMER_NUMBER));
	SetNumber(0);
	return S_OK;
}

//=============================================================================
// 終了処理
//=============================================================================
void CNumber::Uninit(void)
{
	CScene2D::Uninit();
}

//=============================================================================
// 更新処理
//=============================================================================
void CNumber::Update(void)
{
	CScene2D::Update();
}

//=============================================================================
// 描画処理
//=============================================================================
void CNumber::Draw(void)
{
	CScene2D::Draw();
}

//=============================================================================
// インスタンス生成処理
//=============================================================================
CNumber * CNumber::Create(D3DXVECTOR3 pos)
{
	CNumber *pNumber;
	pNumber = new CNumber;
	pNumber->Init(pos);
	return pNumber;
}

//=============================================================================
// 数字設定処理
//=============================================================================
void CNumber::SetNumber(const int nNum)
{
	m_nNumber = nNum;
	InitAnimation(nNum, 10, 0);
}

//=============================================================================
// テクスチャ破棄処理
//=============================================================================
void CNumber::Unload(void)
{
	if (m_pTexture != NULL)
	{
		m_pTexture->Release();
		m_pTexture = NULL;
	}
}